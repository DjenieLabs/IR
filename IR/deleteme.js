
var requirejs = require('requirejs');
requirejs.config({
  baseUrl: __dirname + '/libs/',
  catchError: true
});

var Decoder = requirejs('protocol-decoder');

// decoded: _010111100111111110011111111111111110__010111100111111110011111111111111110__010111100111111110011111111111111110
let num1_v1 = ["2485","710","355","710","355","355","355","355","1065","1065","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","84490","2485","710","355","710","355","355","355","355","1065","1065","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","84490","2485","710","355","710","355","355","355","355","1065","1065","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710"];
// decoded = _010111100111111110011111111111111110__010111100111111110011111111111111110
let num1_v2 = ["2430","810","405","810","405","405","405","405","1215","1215","405","405","405","405","405","405","405","405","810","810","405","405","405","405","405","405","405","405","405","405","405","405","405","405","405","405","810","84645","2430","810","405","810","405","405","405","405","1215","1215","405","405","405","405","405","405","405","405","810","810","405","405","405","405","405","405","405","405","405","405","405","405","405","405","405","405","810"];


// Number 2
// decoded: _01011111001111111110011111111111111001__01011111001111111110011111111111111001__01011111001111111110011111111111111001
let num2_v1 = ["2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355","84135","2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355","84135","2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355"];

let num2_v2 = ["2457","702","351","702","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","351","351","351","351","351","702","702","351","84240","2457","702","351","702","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","351","351","351","351","351","702","702","351","84240","2457","702","351","702","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","351","351","351","351","351","702","702","351","84240","2457","702","351","702","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","351","351","351","351","351","702","702","351","84240","2457","702","351","702","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","702","702","351","351","351","351","351","351","351","351","351","351"];
// decoded: _01011111001111111110011111111111111001__01011111001111111110011111111111111001__01011111001111111110011111111111111001__01011111001111111110011111111111111001
let num2_v3 = ["2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355","84135","2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355","84135","2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355","84135","2485","710","355","710","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","710","710","355","355","355","355","355","355","355","355","355","355","355","355","355","355","710","710","355"];


var volumeUp_data1 = ["4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","1185","395","395","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","1185","395","395","395","395","395","395","395","1185","395","54905","4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","1185","395","395","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","1185","395","395","395","395","395","395","395","1185","395","54905","4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345"];

var volUp_data2 = ["4140","4140","414","414","414","414","414","414","414","414","414","1242","414","1242","414","414","414","414","414","1242","414","1242","414","1242","414","1242","414","414","414","414","414","414","414","414","414","4140","414","414","414","414","414","414","414","414","414","1242","414","1242","414","1242","414","414","414","1242","414","1242","414","1242","414","414","414","414","414","414","414","414","414","1242","414","414","414","414","414","414","414","1242","414","54648","4140","4140","414","414","414","414","414","414","414","414","414","1242","414","1242","414","414","414","414","414","1242","414","1242","414","1242","414","1242","414","414","414","414","414","414","414","414","414","4140","414","414","414","414","414","414","414","414","414","1242","414","1242","414","1242","414","414","414","1242","414","1242","414","1242","414","414","414","414","414","414","414","414","414","1242","414","414","414","414","414","414","414","1242","414"];
var volUp_data3 = ["4301","4301","391","391","391","391","391","391","391","391","391","1173","391","1173","391","391","391","391","391","1173","391","1173","391","1173","391","1173","391","391","391","391","391","391","391","391","391","4301","391","391","391","391","391","391","391","391","391","1173","391","1173","391","1173","391","391","391","1173","391","1173","391","1173","391","391","391","391","391","391","391","391","391","1173","391","391","391","391","391","391","391","1173","391","54740","4301","4301","391","391","391","391","391","391","391","391","391","1173","391","1173","391","391","391","391","391","1173","391","1173","391","1173","391","1173","391","391","391","391","391","391","391","391","391","4301","391","391","391","391","391","391","391","391","391","1173","391","1173","391","1173","391","391","391","1173","391","1173","391","1173","391","391","391","391","391","391","391","391","391","1173","391","391","391","391","391","391","391","1173","391"];
var volUp_data4 = ["4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","1185","395","395","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","1185","395","395","395","395","395","395","395","1185","395","54905","4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","1185","395","395","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","1185","395","395","395","395","395","395","395","1185","395","54905","4345","4345","395","395","395","395","395","395","395","395","395","1185","395","1185","395","395","395","395","395","1185","395","1185","395","1185","395","1185","395","395","395","395","395","395","395","395","395","4345"];

// decoded: __11111011111111111010111010101010111111111111101110101010101011101__01__01
var tv_arrow_up = ["9006", "4266", "474", "474", "474", "474", "474", "1422", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "1422", "474", "1422", "474", "474", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "1422", "474", "474", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "474", "474", "1422", "474", "39816", "9006", "1896", "474", "96222", "9006", "1896", "474"];
// decoded: __11111011111111111010111010101010111111111111101110101010101011101__01__01__01__01
var tv_arrow_up_long_press = ["8892", "4446", "494", "494", "494", "494", "494", "1482", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "1482", "494", "1482", "494", "494", "494", "1482", "494", "1482", "494", "1482", "494", "1482", "494", "1482", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "494", "1482", "494", "494", "494", "1482", "494", "1482", "494", "1482", "494", "1482", "494", "1482", "494", "1482", "494", "494", "494", "1482", "494", "39520", "8892", "1976", "494", "96330", "8892", "1976", "494", "96330", "8892", "1976", "494", "96330", "8892", "1976", "494"];
// decoded: __11111011111111111010111010101010111111111111101110101010101011101__01__01
var tv_arrow_up_3 =  ["9006", "4266", "474", "474", "474", "474", "474", "1422", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "1422", "474", "1422", "474", "474", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "474", "1422", "474", "474", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "1422", "474", "474", "474", "1422", "474", "39816", "9006", "1896", "474", "96222", "9006", "1896", "474"]


// decoded: __11111011111111111010111010101010101111111111101111101010101011101__01__01
var tv_arrow_down_1 = ["9044", "4284", "476", "476", "476", "476", "476", "1428", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "1428", "476", "1428", "476", "476", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "1428", "476", "476", "476", "476", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "476", "476", "1428", "476", "39984", "9044", "1904", "476", "96152", "9044", "1904", "476"];
// decoded: __11111011111111111010111010101010101111111111101111101010101011101__01__01
var tv_arrow_down_2 = ["9044", "4284", "476", "476", "476", "476", "476", "1428", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "1428", "476", "1428", "476", "476", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "476", "1428", "476", "476", "476", "476", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "1428", "476", "476", "476", "1428", "476", "39984", "9044", "1904", "476", "96152", "9044", "1904", "476"];
// Normal press (recorded)
// _010111110011111111100111100011011111__010111110011111111100111100011011111
var tv_arrow_up_base = ["2492","712","356","712","356","356","356","356","356","712","712","356","356","356","356","356","356","356","356","356","712","712","356","356","356","356","712","712","712","356","356","712","356","356","356","356","356","84372","2492","712","356","712","356","356","356","356","356","712","712","356","356","356","356","356","356","356","356","356","712","712","356","356","356","356","712","712","712","356","356","712","356","356","356","356","356"];
// Press + continuous pressing
// _0101111001111111100111100011011111__0101111001111111100111100011011111__0101111001111111100111100011011111__0101111001111111100111100011011111__0101111001111111100111100011011111
var tv_arrow_up_continuous = ["2450","700","350","700","350","350","350","350","1050","1050","350","350","350","350","350","350","350","350","700","700","350","350","350","350","700","700","700","350","350","700","350","350","350","350","350","84350","2450","700","350","700","350","350","350","350","1400","1050","350","350","350","350","350","350","350","350","700","700","350","350","350","350","700","700","700","350","350","700","350","350","350","350","350","84350","2450","700","350","700","350","350","350","350","1400","1050","350","350","350","350","350","350","350","350","700","700","350","350","350","350","700","700","700","350","350","700","350","350","350","350","350","84350","2450","700","350","700","350","350","350","350","1400","1050","350","350","350","350","350","350","350","350","700","700","350","350","350","350","700","700","700","350","350","700","350","350","350","350","350","84350","2450","700","350","700","350","350","350","350","1050","1050","350","350","350","350","350","350","350","350","700","700","350","350","350","350","700","700","700","350","350","700","350","350","350","350","350"];

// 00100000110111111000001001111101_RR
// 00100000110111111000001001111101_RR

console.log(Decoder.analyse(num2_v1));  // 217059041

// let res = Decoder.compareRawArrays(tv_arrow_down_1, tv_arrow_up_continuous);
// console.log("Passed: ", res);
// res = Decoder.findPattern(tv_arrow_up_continuous);
// console.log("Pattern: ", res);

//__10101010111111111010101111111111101010111111111111111110101010101_00011_10101011101111111010101111
//__11111011111111111010111010101010101111111111101111101010101011101__01__01
//__11111011111111111010111010101010111111111111101110101010101011101__01__01
// 0101111001111111100111100011011111
// 010111110011111111100111100011011111
// 100111100011011111
   
// 0101111001111111100111100011011111    // Up arrow continuous guess?
// 0101111100111111111001111000110110    // Down Arrow dvd?
// 010111110011111111100111100011110111  // dvd center button
// 010111110011111111100111100011011111  // tv-arrow_continuous

// pressed: 01011110011111111001111000110110
// against: 0101111001111111100111100011011111
// combined: 01011110011111111001111000110110_0101111001111111100111100011011111
// longest: 0101111001111111100111100011011

// Combined tv_arrow_up_base + tv_arrow_up_continuous
// _010111110011111111100111100011011111__010111110011111111100111100011011111
// Combined sequence: 100111100011011111

// Center button 2: _0101111001111111100111100011110111__0101111001111111100111100011110111__0101111001111111100111100011110111__0101111001111111100111100011110111
// Center button 1: _010111110011111111100111100011110111__010111110011111111100111100011110111__010111110011111111100111100011110111
// TV Up Continuous; _0101111001111111100111100011011111__0101111001111111100111100011011111__0101111001111111100111100011011111

// Center button 2: 0101111001111111100111100011110111  = 11011
// Center button 1: 010111110011111111100111100011110111   
// TvUp continuous: 0101111001111111100111100011011111

// Combined cb1 + tv con: 100111100011
// Combined cb2 + tv con: 0101111001111111100111100011

// dvd up
// 010111110011111111100111100011011111
// 010111110011111111100111100011011111