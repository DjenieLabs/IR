/*
 * Test the protocol-decoder
 * by Roger Camargo - Dez 2016
 */
var assert = require('assert');

var requirejs = require('requirejs');
requirejs.config({
  paths:{
    "decoder": __dirname + "/../assets/protocol-decoder",
  },
  catchError: true
});

var Decoder = requirejs('decoder');

describe("IR.Decoder", function() {

    beforeEach(function() {
    });

    after(function() {
    });

    /* Test 1
     * Using the same data from the SAMSUNG REMOTE CONTROL - Button Volume +
     */
    it('Should return the same pattern when compared with the same data', function(done) {

      /* we also can load JS here
      requirejs(['decoder'], function(decoder) {
        ...
      });
      */

      // Data 1 from Volume +
      var volumeUp_data1 = ["4329", "4329", "333", "1665", "333", "1665", "333", "1665", "333", "666",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "333",  "333", "1665",
                            "333",  "1665", "333", "1665", "333", "333",  "333", "333",  "333", "333",
                            "333",  "333",  "333", "333",  "333", "1665", "333", "1665", "333", "1665",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "333",  "333", "333",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "1665", "333", "1665",
                            "333",  "1665", "333", "1665", "333", "1665", "333", "46620","1332","666",
                            "666",  "333",  "333", "4329", "333", "1665", "333", "1665", "333", "1665",
                            "333",  "333",  "333", "666",  "333", "333",  "333", "333",  "333", "333",
                            "333",  "1665", "333", "1665", "333", "1665", "333", "333",  "333", "333"];

      assert.equal(true, Decoder.compareRawArrays(volumeUp_data1, volumeUp_data1));

      done();
      
    });

    /* Test 2
     * Using the data from the SAMSUNG REMOTE CONTROL - Button Volume +
     */
    it('Should return the same pattern when compared', function(done) {

      // Data 1 from Volume +
      var volumeUp_data1 = ["4329", "4329", "333", "1665", "333", "1665", "333", "1665", "333", "666",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "333",  "333", "1665",
                            "333",  "1665", "333", "1665", "333", "333",  "333", "333",  "333", "333",
                            "333",  "333",  "333", "333",  "333", "1665", "333", "1665", "333", "1665",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "333",  "333", "333",
                            "333",  "333",  "333", "333",  "333", "333",  "333", "1665", "333", "1665",
                            "333",  "1665", "333", "1665", "333", "1665", "333", "46620","1332","666",
                            "666",  "333",  "333", "4329", "333", "1665", "333", "1665", "333", "1665",
                            "333",  "333",  "333", "666",  "333", "333",  "333", "333",  "333", "333",
                            "333",  "1665", "333", "1665", "333", "1665", "333", "333",  "333", "333"];

      // Data 2 from the same Volume +
      var volumeUp_data2 = ["4464", "3968", "496", "1488", "496", "1488", "496", "1488", "496", "496",
                            "496",  "496",  "496", "496",  "496", "496",  "496", "496",  "496", "1488",
                            "496",  "1488", "496", "1488", "496", "496",  "496", "496",  "496", "496",
                            "496",  "496",  "496", "496",  "496", "1488", "496", "1488", "496", "1488",
                            "496",  "496",  "496", "496",  "496", "496",  "496", "496",  "496", "496",
                            "496",  "496",  "496", "496",  "496", "496",  "496", "1488", "496", "1488",
                            "496",  "1488", "496", "1488", "496", "1488", "496", "46624","4464","3968",
                            "496",  "1488", "496", "1488", "496", "1488", "496", "496",  "496", "496",
                            "496",  "496",  "496", "496",  "496", "496",  "496", "1488", "496", "1488",
                            "496",  "1488", "496", "496",  "496", "496",  "496", "496",  "496", "496"];

      assert.equal(true, Decoder.compareRawArrays(volumeUp_data1, volumeUp_data2));

      done();
      
    });

});
